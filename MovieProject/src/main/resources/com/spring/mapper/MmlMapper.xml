<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
<mapper namespace="com.spring.mml.MmlDAO">
	
	<update id="upCounter">
	update mml_content
	set mml_view_count = mml_view_count +1
	where mml_num = #{mml_num}
	</update>
	
	<select id="getMmlContent" parameterType="INTEGER" resultType="com.spring.mml.Mml_ContentVO">
		select *
		from mml_content
		where mml_num = #{mml_num}
	</select>
	
	<select id="getMemberInfo" parameterType="INTEGER" resultType="com.spring.member.MemberVO">
		select *
		from member
		where id = #{id}
	</select>
	
	<select id="getCountFollower" resultType="INTEGER">
		select m_follower
		from member
		where id =#{id}
	</select>
	
	<select id="getCountLike" resultType="INTEGER">
		select mml_like
		from mml_content
		where mml_num =#{mml_num}
	</select>

<!--  =================================mml 팔로우 추가 매퍼 3종 -->		
	<insert id="registerFR">
		insert into member_follow
		values (1,#{mf_ing},#{mf_wer})
	
	</insert>

	<select id="FROverlapedChk"  resultType="INTEGER">
		select count(mf_code)
		from member_follow
		where mf_ing = #{mf_ing}
		and		mf_wer = #{mf_wer}
	
	</select>
	
	<update id="updateMml_follower" >
	update member 
	set m_follower = m_follower +1
	where id = #{id}
	</update>
<!--  ================================= mml 추천 추가 매퍼 3종 -->	
	<select id="giveLikeOverlapCheck"  resultType="INTEGER">
		select count(mct_like)
		from mml_content_thumb
		where  	id = #{giver}
		and		mml_num = #{mml_num}
	</select>

	
	<insert id="giveLike">
		insert into mml_content_thumb
		values (1,#{giver},#{mml_num})
	</insert>

	
	<update id="updateMml_like" >
	update mml_content
	set mml_like = mml_like +1
	where mml_num = #{mml_num}
	</update>
<!--  ================================= mml 신고 추가 매퍼 3종-->		
	<select id="giveWarningOverlapCheck"  resultType="INTEGER">
		select count(id)
		from mml_warning
		where  	id = #{giver}
		and		mml_num = #{mml_num}
	</select>

	
	<insert id="giveWarning">
		insert into mml_warning
		values (#{mml_num},#{giver}, sysdate)
	</insert>

	
	<update id="updateMml_warn_count" >
	update mml_content
	set mml_warn_count = mml_warn_count +1
	where mml_num = #{mml_num}
	</update>	
	
<!-- ==================================== mml 게시글 삭제 -->	

	<delete id="mmlDelete">
	delete mml_content
	where mml_num = #{mml_num}
	</delete>

<!-- ==================================== mml 게시글 삭제 -->	

	<select id="getFollowListFromMF_table" resultType="INTEGER">
	select mf_wer
	from member_follow
	where mf_ing = #{id}
	</select>	
	
<!-- ==================================== mml 게시글 삭제 -->	

	<select id="getFollowers" parameterType="list" resultType="com.spring.member.MemberVO">
	select *
	from member
	where id in 
		<foreach item="item" index="index" separator="," collection="list" open="(" close=")">
	#{item.value}
		</foreach>
	</select>
	
	
		
	
</mapper>